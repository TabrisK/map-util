<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />


    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        ul,li{list-style: none;margin:0;padding:0;float:left;}
        html{height:100%}
        body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}
        #container{height:500px;width:100%;}
        #r-result{width:100%;}
    </style>
</head>
<body>
<div id="container"></div>
<input id="file" type="file">
<p>总长：<b id="sum"></b>米</p>
<script src="./underscore.js"></script>
<script src="https://api.map.baidu.com/api?v=2.0&ak=nLcg543nSxxibj5V0dwU02Dl&s=1"></script>
<script src="./main.js"></script>
<script>
    var map = new BMap.Map("container");          // 创建地图实例

    var point = new BMap.Point(121.48, 31.22);
    var fileInput = document.getElementById("file");
    map.centerAndZoom(point, 15);
    map.enableScrollWheelZoom();

    fileInput.onchange = function(e) {
        startRead(fileInput);
    };
    function draw(points){
        var pointIs = points.map(function(p){
            return new BMap.Point(p[0],p[1]);
        });
        map.addOverlay(new BMap.Polyline(pointIs));
        map.setViewport(pointIs);
        document.getElementById("sum").innerHTML= getDistance(points).toFixed(3);
    }

    function getDistance(ps){
        var sum = 0;
        for(var index = 0;index <ps.length - 1; index++){
            sum += map.getDistance( new BMap.Point(ps[index][0], ps[index][1]),
                    new BMap.Point(ps[index+1][0], ps[index+1][1]));
        }
        return sum;
    }
</script>
</body>
</h